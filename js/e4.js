define(["analyser","util"],function(a,b){function c(){i.save();var c=0,d=0,e={x:Math.floor(h.width/2),y:Math.floor(h.height/2)};f=a.getData(),i.clearRect(0,0,h.width,h.height);for(var p=0,q=f.length;q>p;p+=10)d+=f[p];c=d/q*10,i.fillStyle=g,i.beginPath(),i.arc(e.x,e.y,c,0,m,!0),i.closePath(),i.fill(),i.lineWidth=4;for(var p=0,q=o.length,r=h.width/1.5;q>p;p++){var s=o[p];0!=s.a&&(i.strokeStyle=s.c,i.beginPath(),i.arc(e.x,e.y,s.r,0,m,!0),i.closePath(),i.stroke(),s.r+=j,s.r>r&&(s.a=0))}if(l>c){if(k>2){for(var p=0,q=o.length;q>p;p++)if(0==o[p].a){o[p].c=g,o[p].r=c,o[p].a=1;break}}else k>0&&(g=n[b.intRandom(0,n.length)]);k=0}else k++;l=c,i.restore()}function d(){b.setBg(4),g=n[b.intRandom(0,n.length)];for(var a=0;10>a;a++)o[a]={c:"",r:0,a:0};p=!0}function e(){return p}var f,g,h=b.getById("visual-canvas"),i=h.getContext("2d"),j=20,k=0,l=0,m=2*Math.PI,n=["#fd2700","#64d700","fdfb00","#8314fd","#b8009c","#fa60fd","#fa0000","#e64200","#0093f0","#fda0c0"],o=[],p=!1;return{draw:c,init:d,isInit:e}});