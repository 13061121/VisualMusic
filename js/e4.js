define(["analyser","util"],function(a,b){function c(){j.save();var c=0,d=0,e={x:Math.floor(i.width/2),y:Math.floor(i.height/2)};f=a.getData(),j.clearRect(0,0,i.width,i.height);for(var h=0,q=f.length;q>h;h+=10)d+=f[h];c=d/q*10,j.fillStyle=g,j.beginPath(),j.arc(e.x,e.y,c,0,n,!0),j.closePath(),j.fill(),j.lineWidth=4;for(var h=0,q=p.length,r=i.width/1.5;q>h;h++){var s=p[h];0!=s.a&&(j.strokeStyle=s.c,j.beginPath(),j.arc(e.x,e.y,s.r,0,n,!0),j.closePath(),j.stroke(),s.r+=k,s.r>r&&(s.a=0))}if(m>c){if(l>2){for(var h=0,q=p.length;q>h;h++)if(0==p[h].a){p[h].c=g,p[h].r=c,p[h].a=1;break}}else l>0&&(g=o[b.intRandom(0,o.length)]);l=0}else l++;m=c,j.restore()}function d(){b.setBg(4),g=o[b.intRandom(0,o.length)];for(var a=0;10>a;a++)p[a]={c:"",r:0,a:0};q=!0}function e(){return q}var f,g,h="e4.jpg",i=b.getById("visual-canvas"),j=i.getContext("2d"),k=20,l=0,m=0,n=2*Math.PI,o=["#fd2700","#64d700","fdfb00","#8314fd","#b8009c","#fa60fd","#fa0000","#e64200","#0093f0","#fda0c0"],p=[],q=!1;return{draw:c,init:d,isInit:e,cover:h}});