define(["analyser","util"],function(a,b){function c(){this.c=q[b.intRandom(0,q.length)],this.a=r,r>0&&(r-=4)}function d(){n.save(),g=a.getData(),i=g.length/2-32;var b=m.width/12;for(k=b,n.clearRect(0,0,m.width,m.height),h=16;i>h;h+=4)n.fillStyle=o[h].c,j=g[h]+o[h].a,n.fillRect(0,m.height-j,k,j),k<m.width&&(k+=b);n.restore()}function e(){for(b.setBg(6),h=0;p>h;h++)o.push(new c);s=!0}function f(){return s}var g,h,i,j,k,l="e6.jpg",m=b.getById("visual-canvas"),n=m.getContext("2d"),o=[],p=a.getFftSize()/2,q=["rgba(217, 54, 57, 0.8)","rgba(247, 209, 74, 0.8)","rgba(166, 235, 54, 0.8)","rgba(66, 215, 237, 0.8)","rgba(44, 126, 225, 0.8)","rgba(173, 81, 224, 0.8)"],r=300,s=!1;return{draw:d,init:e,isInit:f,cover:l}});